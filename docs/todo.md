# タスクリスト

## 現在のフェーズ: Phase 1 - 本人確認画像撮影・保存機能

### Phase 1-A: 基本的なデータ構造とAPI実装

#### 設計
- [x] 全体アーキテクチャの設計
- [x] ドメインモデルの詳細設計
  - [x] User, VerificationImage, VerificationRequest エンティティの詳細設計
  - [x] 値オブジェクトの詳細設計
- [x] データベーススキーマ設計
  - [x] User, VerificationImage テーブルの Prisma スキーマ作成
  - [x] 初期マイグレーションの作成
  - [x] VerificationRequest テーブルの Prisma スキーマ追加
  - [x] マイグレーションの更新
- [x] API設計
  - [x] 画像アップロード用エンドポイント設計
  - [x] 画像取得用エンドポイント設計

#### 環境構築
- [x] 基本パッケージのセットアップ
  - [x] Prismaのセットアップ
  - [x] 開発用データベースのセットアップ
  - [x] テスト環境のセットアップ
    - [x] Jestのセットアップ
    - [x] テスト用データベースの設定
- [x] 動作確認用の初期データ作成
  - [x] シードデータの作成
  - [x] データ投入スクリプトの作成
  - [x] 初期データの投入

#### 実装とテスト
- [x] 基本的な値オブジェクトの実装
  - [x] UserId, ImageId の実装
  - [x] 値オブジェクトのユニットテスト実装
- [x] 基本エンティティの実装
  - [x] User エンティティの実装
  - [x] VerificationImage エンティティの実装
  - [x] エンティティのユニットテスト実装
- [x] リポジトリの実装
  - [x] PrismaUserRepository の実装
  - [x] PrismaVerificationImageRepository の実装
  - [x] リポジトリのインテグレーションテスト実装
- [x] 基本APIルートの実装
  - [x] 画像アップロード用APIルートの実装
  - [x] 画像取得用APIルートの実装
  - [x] APIエンドポイントの結合テスト実装

#### 動作確認ポイント
- [x] データベース接続確認
- [x] APIエンドポイントの動作確認
  - [x] curlコマンドでのリクエストテスト
  - [x] レスポンス形式の確認
- [x] テストの実行確認
  - [x] ユニットテストの実行
  - [x] インテグレーションテストの実行

### Phase 1-B: ユーザーインターフェース設計

#### 情報設計
- [x] 画面構成の設計
  - [x] 画面遷移図の作成
  - [x] 各画面の役割と制約の定義
- [x] 情報アーキテクチャの設計
  - [x] ユーザーフロー図の作成
  - [x] 必要な情報の整理と構造化

#### UI/UX設計
- [x] ワイヤーフレームの作成
  - [x] 本人確認フロー画面
    - [x] カメラ撮影画面
    - [x] プレビュー・確認画面
    - [x] 完了画面
  - [x] 管理者用画面
    - [x] 本人確認要求一覧画面
    - [x] 確認詳細画面
- [x] UIコンポーネントの設計
  - [x] 必要なUIコンポーネントの洗い出し
  - [x] コンポーネント階層の設計
  - [x] 共通UIコンポーネントの定義
- [x] インタラクション設計
  - [x] 各画面でのユーザー操作フローの定義
  - [x] エラーハンドリングとフィードバックの設計
  - [x] アクセシビリティ要件の定義

#### 設計ドキュメント作成
- [x] UI設計ドキュメントの作成
  - [x] コンポーネント設計書の作成
  - [x] スタイルガイドの作成
- [x] 実装ガイドラインの作成
  - [x] コンポーネント実装規約の定義
  - [x] 状態管理の方針定義

#### デザインレビュー
- [x] 設計レビュー
  - [x] ユーザビリティレビュー
  - [x] アクセシビリティレビュー
  - [x] 技術的な実現可能性の確認

### Phase 1-C: フロントエンド基本実装

#### 環境構築
- [x] UIライブラリのセットアップ
  - [x] shadcn/uiのセットアップ
  - [x] カメラ操作用ライブラリの追加
- [x] フロントエンドテスト環境のセットアップ
  - [x] React Testing Libraryのセットアップ
  - [x] MSWのセットアップ（APIモック用）

#### 実装とテスト
- [x] 基本レイアウトの実装
  - [x] レイアウトコンポーネント
  - [x] ヘッダーコンポーネント
  - [x] コンポーネントのユニットテスト
- [x] 共通UIコンポーネントの実装
  - [x] デザインシステムの基本コンポーネント実装
  - [x] コンポーネントのストーリー作成
  - [x] アクセシビリティテスト
- [x] カメラ機能の実装
  - [x] カメラコンポーネント
  - [x] プレビューコンポーネント
  - [x] カメラ関連コンポーネントのユニットテスト
- [x] APIとの連携
  - [x] 画像アップロード機能
  - [x] プレビュー表示機能
  - [x] API連携部分の結合テスト

#### 動作確認ポイント
- [x] カメラアクセス確認
- [x] 画像キャプチャ・プレビュー確認
- [x] アップロード機能の動作確認
- [x] テストの実行確認
  - [x] コンポーネントテストの実行
  - [x] 結合テストの実行
- [x] アクセシビリティチェック
  - [x] スクリーンリーダーでの動作確認
  - [x] キーボード操作の確認

### Phase 1-D: 本人確認ワークフロー実装

#### 実装とテスト
- [x] VerificationStatus値オブジェクトの実装
  - [x] 値オブジェクトの実装
  - [x] ユニットテストの実装
- [x] VerificationRequestエンティティの実装
  - [x] エンティティの実装
  - [x] ユニットテストの実装
- [x] PrismaVerificationRequestRepositoryの実装
  - [x] リポジトリの実装
  - [x] リポジトリのインテグレーションテスト実装
- [x] 本人確認ワークフローの実装
  - [x] ステータス管理機能
  - [x] 承認・却下機能
  - [x] ワークフロー処理のユニットテスト
  - [x] ワークフロー処理の結合テスト
- [x] 管理画面の実装
  - [x] 本人確認要求一覧表示
  - [x] ステータス更新機能
  - [x] 管理画面コンポーネントのユニットテスト
  - [x] 管理機能の結合テスト

#### 動作確認ポイント
- [x] ワークフロー全体の動作確認
- [x] ステータス変更の反映確認
- [x] 管理機能の動作確認
- [x] テストの実行確認
  - [x] ドメインロジックのテスト
  - [x] ワークフロー処理のテスト
  - [x] 管理機能のテスト

### Phase 1-E: パフォーマンス最適化とエラーハンドリング

- [ ] パフォーマンス最適化
  - [ ] 画像処理の最適化
  - [ ] データベースクエリの最適化
  - [ ] パフォーマンステストの実装と実行
- [ ] エラーハンドリングの改善
  - [ ] エラーケースの網羅
  - [ ] エラーメッセージの改善
  - [ ] エラーハンドリングのテスト実装
- [ ] E2Eテストの実装
  - [ ] 主要なユースケースのE2Eテストシナリオ作成
  - [ ] Playwrightを使用したE2Eテスト実装
  - [ ] CI/CDパイプラインでのE2Eテスト実行確認

### 現在の最優先タスク

1. **パフォーマンス最適化とエラーハンドリング**: Phase 1-Eに進み、以下の作業を行う
   - 画像処理の最適化
   - データベースクエリの最適化
   - エラーハンドリングの改善

2. **E2Eテストの実装**: 主要なユースケースのE2Eテストを実装
   - 本人確認フローのE2Eテスト
   - 管理画面操作のE2Eテスト
   - CI/CDパイプラインでのE2Eテスト実行確認

3. **ドキュメントの更新**: 実装完了した機能のドキュメントを更新
   - [x] API仕様書の更新
   - [x] コンポーネント設計書の更新
   - [x] テスト計画と結果の文書化